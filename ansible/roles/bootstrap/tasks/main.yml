- name: "wait for {{ xraylab.namespace }} namespace to be created"
  kubernetes.core.k8s_info:
    kind: Namespace
    name: "{{ xraylab.namespace }}"
    wait: yes
    wait_sleep: 10
    wait_timeout: 360

- name: ODF bootstrap
  include_tasks: odf.yml

#- name: "Wait for the ocs-operator to complete installation before moving on"
#  kubernetes.core.k8s_info:
#    api_version: "v1"
#    kind: Deployment
#    name: "ocs-operator"
#    wait: true
#    wait_condition:
#      reason: MinimumReplicasAvailable
#      status: 'True'
#      type: Available
#    wait_sleep: 30
#    wait_timeout: 600

- name: Serverless bootstrap
  include_tasks: serverless.yml

- name: Create database secret
  include_tasks: db-secret.yml

- name: grafana bootstrap
  include_tasks: grafana.yml

- name: xraylab demo bootstrap
  include_tasks: xraylab.yml
